
@prefix : <http://goonmill.org/2007/family.n3#>.
@prefix p: <http://goonmill.org/2007/property.n3#> .
@prefix c: <http://goonmill.org/2007/characteristic.n3#>.
@prefix pk: <http://goonmill.org/2009/perk.n3#>.
@prefix s: <http://goonmill.org/2007/skill.n3#>.

@prefix die: <http://goonmill.org/2007/dice.n3#>.
@prefix pcclass: <http://goonmill.org/2007/pcclass.n3#>.

@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix log: <http://www.w3.org/2000/10/swap/log#> .

<> rdfs:title "Families of Monster" .

:standardDarkvision a c:Darkvision;
    a c:Sense;
    rdfs:label "Darkvision";
    p:range "60 ft.";
.

:aberration
    p:textLocation "familytext/aberration.htm";
    a c:Family;
    p:hitDiceType die:d8;
    p:babTable pcclass:cleric!p:babTable;
    p:goodSaves c:will;
    p:skillPoints "(int+2)*hitDiceType";

    p:perk :standardDarkvision;
    p:proficiency c:naturalWeapons, c:armorAsDescribed;
.

:abomination
    p:textLocation "familytext/abomination.htm";
    a c:Family;
    p:language s:abyssal, s:celestial, s:infernal;

    p:perk [ a c:Immunity; p:damageType c:polymorph ];
    p:perk [ a c:Immunity; p:damageType c:mindAffecting ];
    p:perk pk:blindsight;
    p:perk pk:noAbilityDamage, pk:noAbilityDrain, pk:noDeathFromMassiveDamage;
    p:perk [ a c:Resistance; p:damageType c:cold; rdf:value 20 ];
    p:perk [ a c:Resistance; p:damageType c:fire; rdf:value 20 ];
    p:perk pk:summon;
    p:perk pk:telepathy;
.

:animal
    p:textLocation "familytext/animal.htm";
    a c:Family;
    p:hitDiceType die:d8;
    p:babTable pcclass:cleric!p:babTable;
    p:goodSaves c:fort, c:ref;
    p:skillPoints "(int+2)*hitDiceType";
    p:abilityConstraint [ p:ability c:int; p:maximum 2 ];
    p:alignment c:neutral;
    p:treasure rdf:nil;
    p:proficiency c:naturalWeapons, c:armorNone;

    p:perk pk:lowLightVision;
    p:additional "noncombative animals -5 to attack, 1/2 str bonus to dam";
.

:construct
    p:textLocation "familytext/construct.htm";
    a c:Family;
    p:hitDiceType die:d10;
    p:babTable pcclass:cleric!p:babTable;
    p:goodSaves rdf:nil;
    p:skillPoints "(int+2)*hitDiceType";
    p:abilityConstraint [ p:ability c:con; p:maximum 0 ];
    p:proficiency c:naturalWeapons, c:armorNone, c:weaponsAsDescribed;

    p:perk pk:lowLightVision, pk:standardDarkvision;
    p:perk pk:noAbilityDamage, pk:noAbilityDrain, pk:noEnergyDrain, 
            pk:noNonLethalDamage, pk:noCriticalHits, pk:noTiring, 
            pk:noDeathFromMassiveDamage, pk:destroyedAtZero;
    p:perk pk:soulless;
    p:perk pk:noEat, pk:noSleep, pk:noBreathe;
    p:perk pk:fortitudeImmunity;
    p:perk [ a c:Immunity; p:damageType c:mindAffecting ],
           [ a c:Immunity; p:damageType c:poison ],
           [ a c:Immunity; p:damageType c:sleep ],
           [ a c:Immunity; p:damageType c:paralysis ],
           [ a c:Immunity; p:damageType c:stunning ],
           [ a c:Immunity; p:damageType c:disease ],
           [ a c:Immunity; p:damageType c:deathEffects ],
           [ a c:Immunity; p:damageType c:necromancy ];
    p:additional 
        "Cannot heal damage on their own, but often can be repaired by exposing them to a certain kind of effect (see the creature’s description for details) or through the use of the Craft Construct feat. A construct with the fast healing special quality still benefits from that quality.", 
        "Because its body is a mass of unliving matter, a construct is hard to destroy. It gains bonus hit points based on size, as shown on the table. [table]"
    ;
.

:dragon
    p:textLocation "familytext/dragon.htm";
    a c:Family;
    p:hitDiceType die:d10;
    p:babTable pcclass:fighter!p:babTable;
    p:goodSaves c:fort, c:ref, c:will;
    p:skillPoints "(int+6)*hitDiceType";
    p:proficiency c:naturalWeapons, c:weaponsAsDescribed, c:armorNone;

    p:perk :standardDarkvision, pk:lowLightVision;
    p:perk [ a c:Immunity; p:damageType c:sleep ],
           [ a c:Immunity; p:damageType c:paralysis ];
.
# TODO - requires reasoning
{ { ?m p:family :dragon . ?m p:shapeChangeStatus c:asHumanoid } 
    => { ?m p:proficiency c:simpleWeapons } ;
} rdfs:label "In human form, proficient with simple weapons.";
.

:elemental
    p:textLocation "familytext/elemental.htm";
    a c:Family;
    p:hitDiceType die:d8;
    p:babTable pcclass:cleric!p:babTable;
    p:skillPoints "(int+2)*hitDiceType";
    p:proficiency c:naturalWeapons, c:weaponsAsDescribed, c:armorAsDescribed;

    p:perk :standardDarkvision;
    p:perk [ a c:Immunity; p:damageType c:poison ],
           [ a c:Immunity; p:damageType c:sleep ],
           [ a c:Immunity; p:damageType c:stunning ],
           [ a c:Immunity; p:damageType c:paralysis ];
    p:perk pk:noCriticalHits, pk:noFlanking;
    p:perk pk:quasiSoulless;
    p:perk pk:noEat, pk:noSleep, pk:noBreathe;
.
# the goodSaves of an elemental depend on the subType, as given below.
# TODO - requires reasoning
{ { ?m p:family :elemental, :air } => { ?m p:goodSaves c:ref } ;
} rdfs:label "Air elementals have good reflex saves";
.
{ { ?m p:family :elemental, :fire } => { ?m p:goodSaves c:ref } ;
}   rdfs:label "Fire elementals have good reflex saves";
.
{ { ?m p:family :elemental, :earth } => { ?m p:goodSaves c:fort } ;
}   rdfs:label "Earth elementals have good fortitude saves";
.
{ { ?m p:family :elemental, :water } => { ?m p:goodSaves c:fort } ;
}   rdfs:label "Water elementals have good fortitude saves";
.

:fey
    p:textLocation "familytext/fey.htm";
    a c:Family;
    p:hitDiceType die:d6;
    p:babTable pcclass:wizard!p:babTable;
    p:goodSaves c:ref, c:will;
    p:skillPoints "(int+6)*hitDiceType";
    p:proficiency c:simpleWeapons, c:weaponsAsDescribed, c:armorAsDescribed;

    p:perk pk:lowLightVision;
.

:giant
    p:textLocation "familytext/giant.htm";
    a c:Family;
    p:hitDiceType die:d8;
    p:babTable pcclass:cleric!p:babTable;
    p:goodSaves c:fort;
    p:skillPoints "(int+2)*hitDiceType";
    p:proficiency c:simpleWeapons, c:martialWeapons, c:naturalWeapons, 
            c:armorAsDescribed;

    p:perk pk:lowLightVision;
.

:humanoid
    p:textLocation "familytext/humanoid.htm";
    a c:Family;
    p:hitDiceType die:d8;
    p:babTable pcclass:cleric!p:babTable;
    p:goodSaves c:ref;
    p:skillPoints "(int+2)*hitDiceType";
    p:proficiency c:simpleWeapons, c:armorAsDescribed;
    p:additional "Proficiencies may be determined by character class.";
.

:magicalBeast
    p:textLocation "familytext/magicalBeast.htm";
    a c:Family;
    rdfs:label "Magical Beast";
    p:hitDiceType die:d10;
    p:babTable pcclass:fighter!p:babTable;
    p:goodSaves c:fort, c:ref;
    p:skillPoints "(int+2)*hitDiceType";
    p:proficiency c:naturalWeapons, c:armorNone;

    p:perk pk:lowLightVision, :standardDarkvision;
.

:monstrousHumanoid
    p:textLocation "familytext/monstrousHumanoid.htm";
    a c:Family;
    rdfs:label "Monstrous Humanoid";
    p:hitDiceType die:d8;
    p:babTable pcclass:fighter!p:babTable;
    p:goodSaves c:ref, c:will;
    p:skillPoints "(int+2)*hitDiceType";
    p:proficiency c:simpleWeapons, c:weaponsAsDescribed, c:armorAsDescribed;

    p:perk :standardDarkvision;
.

:ooze
    p:textLocation "familytext/ooze.htm";
    a c:Family;
    p:hitDiceType die:d10;
    p:babTable pcclass:cleric!p:babTable;
    p:goodSaves rdf:nil; 
    p:skillPoints "(int+2)*hitDiceType";
    p:abilityConstraint [ p:ability c:int; p:maximum 0 ];
    p:proficiency c:naturalWeapons, c:armorNone;

    p:perk pk:blind, pk:blindsight;
    p:perk [ a c:Immunity; p:damageType c:poison ],
           [ a c:Immunity; p:damageType c:sleep ],
           [ a c:Immunity; p:damageType c:paralysis ],
           [ a c:Immunity; p:damageType c:polymorph ],
           [ a c:Immunity; p:damageType c:stunning ],
           [ a c:Immunity; p:damageType c:mindAffecting ];
    p:perk pk:noCriticalHits, pk:noFlanking;
    p:perk pk:noSleep;
    p:additional 
        "Some oozes have the ability to deal acid damage to objects. In such a case, the amount of damage is equal to 10 + ½ ooze’s HD + ooze’s Con modifier per full round of contact."
    ;
.

:outsider
    p:textLocation "familytext/outsider.htm";
    a c:Family;
    p:hitDiceType die:d8;
    p:babTable pcclass:fighter!p:babTable;
    p:goodSaves c:fort, c:ref, c:will;
    p:skillPoints "(int+8)*hitDiceType";
    p:proficiency c:simpleWeapons, c:martialWeapons, c:weaponsAsDescribed, 
            c:armorAsDescribed;

    p:perk :standardDarkvision;
    p:perk pk:quasiSoulless;
    p:perk pk:noEat, pk:noSleep;
.
# TODO - requires reasoning.
{ { ?m p:family :outsider; p:existentialStatus c:native. } =>
    { 
      { ?m p:vitality pk:noEat } a log:Falsehood .
      { ?m p:vitality pk:noSleep } a log:Falsehood .
      { ?m p:specialQuality pk:quasiSoulless } a log:Falsehood .
    }; 
}   rdfs:label "outsiders on their native planes are different.";
.


:plant
    p:textLocation "familytext/plant.htm";
    a c:Family;
    p:hitDiceType die:d8;
    p:babTable pcclass:cleric!p:babTable;
    p:goodSaves c:fort;
    p:skillPoints "(int+2)*hitDiceType";
    p:proficiency c:naturalWeapons, c:armorNone;

    p:perk pk:lowLightVision;
    p:perk [ a c:Immunity; p:damageType c:mindAffecting ], 
           [ a c:Immunity; p:damageType c:poison ], 
           [ a c:Immunity; p:damageType c:sleep ], 
           [ a c:Immunity; p:damageType c:paralysis ], 
           [ a c:Immunity; p:damageType c:polymorph ], 
           [ a c:Immunity; p:damageType c:stunning ];
    p:perk pk:noCriticalHits;
    p:perk pk:noSleep;
.

:undead
    p:textLocation "familytext/undead.htm";
    a c:Family;
    p:hitDiceType die:d12;
    p:babTable pcclass:wizard!p:babTable;
    p:goodSaves c:will;
    p:skillPoints "(int+4)*hitDiceType";
    p:abilityConstraint [ p:ability c:con; p:maximum 0 ];
    p:proficiency c:naturalWeapons, c:weaponsAsDescribed, c:simpleWeapons, 
            c:armorAsDescribed;

    p:perk :standardDarkvision;
    p:perk [ a c:Immunity; p:damageType c:mindAffecting ], 
           [ a c:Immunity; p:damageType c:poison ], 
           [ a c:Immunity; p:damageType c:sleep ], 
           [ a c:Immunity; p:damageType c:paralysis ], 
           [ a c:Immunity; p:damageType c:stunning ], 
           [ a c:Immunity; p:damageType c:disease ], 
           [ a c:Immunity; p:damageType c:deathEffects ];
    p:perk pk:noCriticalHits, pk:noNonLethalDamage, pk:noAbilityDrain, 
            pk:noAbilityDamage, pk:noEnergyDrain, pk:noTiring, 
            pk:noDeathFromMassiveDamage, pk:destroyedAtZero,
            pk:negativeEnergyHealing;
    p:perk pk:fortitudeImmunity;
    p:perk pk:soulless;
    p:perk pk:noBreathe, pk:noEat, pk:noSleep;
.
# TODO - requires reasoning
{ { ?m p:family :undead . ?m c:int 0 } 
    => { ?m p:combatMechanic pk:cannotHealNaturally };
}   rdfs:label "Undead with no intelligence score cannot heal on their own.";
.
  


:vermin
    p:textLocation "familytext/vermin.htm";
    a c:Family;
    p:hitDiceType die:d8;
    p:babTable pcclass:cleric!p:babTable;
    p:goodSaves c:fort;
    p:skillPoints "(int+2)*hitDiceType";
    p:abilityConstraint [ p:ability c:int; p:maximum 0 ];
    p:proficiency c:naturalWeapons, c:armorNone;

    p:perk :standardDarkvision;
    p:immunity [ a c:Immunity; p:damageType c:mindAffecting ];
.

:air
    p:textLocation "familytext/air.htm";
    a c:Family;
    p:movement [ a c:Fly; p:flight c:perfectFlight ];
.

:angel
    p:textLocation "familytext/angel.htm";
    a c:Family;
    p:saveBonuses [ c:poison +4 ];

    p:perk :standardDarkvision;
    p:perk [ a c:Immunity; p:damageType c:acid ], 
           [ a c:Immunity; p:damageType c:cold ], 
           [ a c:Immunity; p:damageType c:petrification ];
    p:perk [ a c:Resistance; p:damageType c:electricity; rdf:value 10 ],
           [ a c:Resistance; p:damageType c:fire; rdf:value 10 ];
    p:perk pk:protectiveAura, pk:tongues;
.

:aquatic
    p:textLocation "familytext/aquatic.htm";
    rdfs:comment """<p>These creatures always have swim speeds and thus can
    move in water without making <a href="/srd/skills/swim.htm">Swim</a>
    checks. An aquatic creature can breathe underwater. It cannot also breathe
    air unless it has the amphibious special quality.</p> """;
    a c:Family;
    p:movement c:swim;

    p:perk pk:breatheUnderwater;
    p:perk pk:mustBreatheWater;
.

:amphibious
    p:textLocation "familytext/amphibious.htm";

    a c:Family
. # NOT a SRD-standard type!  but required to define aquatic.
# TODO - requires reasoning
{ { ?m p:family :aquatic, :amphibious } 
    => { { ?m p:vitality pk:mustBreatheWater } a log:Falsehood. };
}   rdfs:label "Aquatic creates which are amphibious may breathe air.";
.


:archon
    p:textLocation "familytext/archon.htm";

    a c:Family;
    p:saveBonuses [ c:poison +4 ];

    p:perk :standardDarkvision;
    p:perk [ a c:Immunity; p:damageType c:electricity ], 
               [ a c:Immunity; p:damageType c:petrification ];
    p:perk pk:auraOfMenace, pk:magicCircleAgainstEvil, pk:teleport, pk:tongues;
.

:augmented
    p:textLocation "familytext/augmented.htm";
    a c:Family;
    # combined with some other type or subtype, has the traits of current type and features of original type
.

:chaotic
    p:textLocation "familytext/chaotic.htm";
    a c:Family;
    p:alignmentEffect c:chaotic;
.

:cold
    p:textLocation "familytext/cold.htm";
    a c:Family;
    p:perk [ a c:Immunity; p:damageType c:cold ];
    p:perk [ a c:Vulnerability; p:damageType c:fire ];
.

:demon
    p:textLocation "familytext/demon.htm";
    a c:Family;
    p:language s:abyssal, s:celestial, s:draconic;

    p:perk [ a c:Immunity; p:damageType c:electricity  ], 
           [ a c:Immunity; p:damageType c:poison ];
    p:perk [ a c:Resistance; p:damageType c:acid; rdf:value 10  ],
           [ a c:Resistance; p:damageType c:cold; rdf:value 10  ],
           [ a c:Resistance; p:damageType c:fire; rdf:value 10  ];
    p:perk pk:summon, pk:telepathy;
.

:devil
    p:textLocation "familytext/devil.htm";
    a c:Family;
    p:language s:infernal, s:celestial, s:draconic;

    p:perk [ a c:Immunity; p:damageType c:fire  ], 
           [ a c:Immunity; p:damageType c:poison  ];
    p:perk [ a c:Resistance; p:damageType c:acid; rdf:value 10  ],
           [ a c:Resistance; p:damageType c:cold; rdf:value 10  ];
    p:perk pk:seeInDarkness;
    p:perk pk:summon, pk:telepathy;
.

:earth
    p:textLocation "familytext/earth.htm";
    a c:Family;
    p:movement c:burrow;
.

:evil
    p:textLocation "familytext/evil.htm";
    a c:Family;
    p:alignmentEffect c:evil;
.

:extraplanar
    p:textLocation "familytext/extraplanar.htm";
    a c:Family;
.

:fire
    p:textLocation "familytext/fire.htm";
    a c:Family;
    p:perk [ a c:Immunity; p:damageType c:fire ];
    p:perk [ a c:Vulnerability; p:damageType c:cold ];
.

:goblinoid
    p:textLocation "familytext/goblinoid.htm";
    a c:Family;
.

:good
    p:textLocation "familytext/good.htm";
    a c:Family;
    p:alignmentEffect c:good;
.

:incorporeal
    p:textLocation "familytext/incorporeal.htm";
    a c:Family;
    p:abilityConstraint [ p:ability c:str; p:maximum 0 ];
    p:movement c:incorporealMovement;

    p:perk [ a c:Immunity; p:damageType c:nonMagical ];
    p:perk pk:incorporealSenses;
    p:perk pk:weaponFinesseAlways, pk:incorporealDefense, pk:charismaDeflection;
    p:additional 
        "Although it is not a magical attack, holy water can affect incorporeal undead, but a hit with holy water has a 50% chance of not affecting an incorporeal creature.",
        "It cannot take any physical action that would move or manipulate an opponent or its equipment, nor is it subject to such actions. Incorporeal creatures have no weight and do not set off traps that are triggered by weight."
    ;
.

:lawful
    p:textLocation "familytext/lawful.htm";
    a c:Family;
    p:alignmentEffect c:lawful;
.

:native
    p:textLocation "familytext/native.htm";
    a c:Family
.

:reptilian
    p:textLocation "familytext/reptilian.htm";
    a c:Family
.

:shapechanger
    p:textLocation "familytext/shapechanger.htm";
    a c:Family;
    p:proficiency c:naturalWeapons, c:simpleWeapons, c:weaponsAsDescribed, c:armorAsDescribed;
.

:swarm
    p:textLocation "familytext/swarm.htm";
    a c:Family;

    p:perk [ a c:Vulnerability; p:damageType c:areaEffect ];
    p:perk pk:noCriticalHits, pk:noFlanking, pk:destroyedAtZero, pk:noTrip, 
            pk:noGrapple, pk:noBullRush, pk:diffuseTarget, pk:cannotGrapple,
            pk:cannotMakeAttackOfOpportunity, pk:distraction;
    p:additional "Swarms made up of Diminutive or Fine creatures are susceptible to high winds such as that created by a gust of wind spell. For purposes of determining the effects of wind on a swarm, treat the swarm as a creature of the same size as its constituent creatures. A swarm rendered unconscious by means of nonlethal damage becomes disorganized and dispersed, and does not reform until its hit points exceed its nonlethal damage.";
.
# TODO - requires reasoning.
{ { ?m p:family :swarm; p:size c:tiny } 
    => { ?m p:resistance [ p:attackEffect c:piercing; rdf:value "50%" ], 
                         [ p:attackEffect c:slashing; rdf:value "50%" ] };
}   rdfs:label "A swarm of tiny creatures takes half damage from piercing and slashing.";
.
{ { ?m p:family :swarm; p:size c:diminutive } => { ?m p:combatMechanic pk:noWeaponDamage };
}   rdfs:label "A swarm composed of Diminutive creatures is immune to all weapon damage.";
.
{ { ?m p:family :swarm; p:size c:fine } =>  { ?m p:combatMechanic pk:noWeaponDamage };
}   rdfs:label "A swarm composed of Fine creatures is immune to all weapon damage.";
.

:water
    p:textLocation "familytext/water.htm";
    a c:Family;
    p:movement c:swim;
    p:perk pk:breatheUnderwater;
.

# vim:si
